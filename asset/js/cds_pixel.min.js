!function (d, b, v) { !function o(a, s, u) { function c(t, e) { if (!s[t]) { if (!a[t]) { var r = "function" == typeof require && require; if (!e && r) return r(t, !0); if (l) return l(t, !0); var n = new Error("Cannot find module '" + t + "'"); throw n.code = "MODULE_NOT_FOUND", n } var i = s[t] = { exports: {} }; a[t][0].call(i.exports, function (e) { return c(a[t][1][e] || e) }, i, i.exports, o, a, s, u) } return s[t].exports } for (var l = "function" == typeof require && require, e = 0; e < u.length; e++)c(u[e]); return c }({ 1: [function (e, t, r) { t.exports = function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } }, {}], 2: [function (e, t, r) { t.exports = function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } }, {}], 3: [function (e, t, r) { function n(e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } t.exports = function (e, t, r) { return t && n(e.prototype, t), r && n(e, r), e } }, {}], 4: [function (e, t, r) { function n(e) { return t.exports = n = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, n(e) } t.exports = n }, {}], 5: [function (e, t, r) { var n = e("./setPrototypeOf"); t.exports = function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), t && n(e, t) } }, { "./setPrototypeOf": 8 }], 6: [function (e, t, r) { t.exports = function (e) { return e && e.__esModule ? e : { default: e } } }, {}], 7: [function (e, t, r) { var n = e("../helpers/typeof"), i = e("./assertThisInitialized"); t.exports = function (e, t) { return !t || "object" !== n(t) && "function" != typeof t ? i(e) : t } }, { "../helpers/typeof": 9, "./assertThisInitialized": 1 }], 8: [function (e, r, t) { function n(e, t) { return r.exports = n = Object.setPrototypeOf || function (e, t) { return e.__proto__ = t, e }, n(e, t) } r.exports = n }, {}], 9: [function (e, t, r) { function n(e) { return (n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e })(e) } function i(e) { return "function" == typeof Symbol && "symbol" === n(Symbol.iterator) ? t.exports = i = function (e) { return n(e) } : t.exports = i = function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : n(e) }, i(e) } t.exports = i }, {}], 10: [function (e, t, r) { t.exports = e("regenerator-runtime") }, { "regenerator-runtime": 11 }], 11: [function (e, t, r) { var n = function (o) { "use strict"; var u, e = Object.prototype, c = e.hasOwnProperty, t = "function" == typeof Symbol ? Symbol : {}, i = t.iterator || "@@iterator", r = t.asyncIterator || "@@asyncIterator", n = t.toStringTag || "@@toStringTag"; function a(e, t, r, n) { var i = t && t.prototype instanceof s ? t : s, o = Object.create(i.prototype), a = new O(n || []); return o._invoke = function (o, a, s) { var u = f; return function (e, t) { if (u === h) throw new Error("Generator is already running"); if (u === d) { if ("throw" === e) throw t; return I() } for (s.method = e, s.arg = t; ;) { var r = s.delegate; if (r) { var n = k(r, s); if (n) { if (n === b) continue; return n } } if ("next" === s.method) s.sent = s._sent = s.arg; else if ("throw" === s.method) { if (u === f) throw u = d, s.arg; s.dispatchException(s.arg) } else "return" === s.method && s.abrupt("return", s.arg); u = h; var i = l(o, a, s); if ("normal" === i.type) { if (u = s.done ? d : p, i.arg === b) continue; return { value: i.arg, done: s.done } } "throw" === i.type && (u = d, s.method = "throw", s.arg = i.arg) } } }(e, r, a), o } function l(e, t, r) { try { return { type: "normal", arg: e.call(t, r) } } catch (e) { return { type: "throw", arg: e } } } o.wrap = a; var f = "suspendedStart", p = "suspendedYield", h = "executing", d = "completed", b = {}; function s() { } function v() { } function y() { } var m = {}; m[i] = function () { return this }; var g = Object.getPrototypeOf, w = g && g(g(R([]))); w && w !== e && c.call(w, i) && (m = w); var _ = y.prototype = s.prototype = Object.create(m); function x(e) { ["next", "throw", "return"].forEach(function (t) { e[t] = function (e) { return this._invoke(t, e) } }) } function C(u) { var t; this._invoke = function (r, n) { function e() { return new Promise(function (e, t) { !function t(e, r, n, i) { var o = l(u[e], u, r); if ("throw" !== o.type) { var a = o.arg, s = a.value; return s && "object" == typeof s && c.call(s, "__await") ? Promise.resolve(s.__await).then(function (e) { t("next", e, n, i) }, function (e) { t("throw", e, n, i) }) : Promise.resolve(s).then(function (e) { a.value = e, n(a) }, function (e) { return t("throw", e, n, i) }) } i(o.arg) }(r, n, e, t) }) } return t = t ? t.then(e, e) : e() } } function k(e, t) { var r = e.iterator[t.method]; if (r === u) { if (t.delegate = null, "throw" === t.method) { if (e.iterator.return && (t.method = "return", t.arg = u, k(e, t), "throw" === t.method)) return b; t.method = "throw", t.arg = new TypeError("The iterator does not provide a 'throw' method") } return b } var n = l(r, e.iterator, t.arg); if ("throw" === n.type) return t.method = "throw", t.arg = n.arg, t.delegate = null, b; var i = n.arg; return i ? i.done ? (t[e.resultName] = i.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = u), t.delegate = null, b) : i : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, b) } function D(e) { var t = { tryLoc: e[0] }; 1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t) } function E(e) { var t = e.completion || {}; t.type = "normal", delete t.arg, e.completion = t } function O(e) { this.tryEntries = [{ tryLoc: "root" }], e.forEach(D, this), this.reset(!0) } function R(t) { if (t) { var e = t[i]; if (e) return e.call(t); if ("function" == typeof t.next) return t; if (!isNaN(t.length)) { var r = -1, n = function e() { for (; ++r < t.length;)if (c.call(t, r)) return e.value = t[r], e.done = !1, e; return e.value = u, e.done = !0, e }; return n.next = n } } return { next: I } } function I() { return { value: u, done: !0 } } return v.prototype = _.constructor = y, y.constructor = v, y[n] = v.displayName = "GeneratorFunction", o.isGeneratorFunction = function (e) { var t = "function" == typeof e && e.constructor; return !!t && (t === v || "GeneratorFunction" === (t.displayName || t.name)) }, o.mark = function (e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, y) : (e.__proto__ = y, n in e || (e[n] = "GeneratorFunction")), e.prototype = Object.create(_), e }, o.awrap = function (e) { return { __await: e } }, x(C.prototype), C.prototype[r] = function () { return this }, o.AsyncIterator = C, o.async = function (e, t, r, n) { var i = new C(a(e, t, r, n)); return o.isGeneratorFunction(t) ? i : i.next().then(function (e) { return e.done ? e.value : i.next() }) }, x(_), _[n] = "Generator", _[i] = function () { return this }, _.toString = function () { return "[object Generator]" }, o.keys = function (r) { var n = []; for (var e in r) n.push(e); return n.reverse(), function e() { for (; n.length;) { var t = n.pop(); if (t in r) return e.value = t, e.done = !1, e } return e.done = !0, e } }, o.values = R, O.prototype = { constructor: O, reset: function (e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = u, this.done = !1, this.delegate = null, this.method = "next", this.arg = u, this.tryEntries.forEach(E), !e) for (var t in this) "t" === t.charAt(0) && c.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = u) }, stop: function () { this.done = !0; var e = this.tryEntries[0].completion; if ("throw" === e.type) throw e.arg; return this.rval }, dispatchException: function (r) { if (this.done) throw r; var n = this; function e(e, t) { return o.type = "throw", o.arg = r, n.next = e, t && (n.method = "next", n.arg = u), !!t } for (var t = this.tryEntries.length - 1; 0 <= t; --t) { var i = this.tryEntries[t], o = i.completion; if ("root" === i.tryLoc) return e("end"); if (i.tryLoc <= this.prev) { var a = c.call(i, "catchLoc"), s = c.call(i, "finallyLoc"); if (a && s) { if (this.prev < i.catchLoc) return e(i.catchLoc, !0); if (this.prev < i.finallyLoc) return e(i.finallyLoc) } else if (a) { if (this.prev < i.catchLoc) return e(i.catchLoc, !0) } else { if (!s) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return e(i.finallyLoc) } } } }, abrupt: function (e, t) { for (var r = this.tryEntries.length - 1; 0 <= r; --r) { var n = this.tryEntries[r]; if (n.tryLoc <= this.prev && c.call(n, "finallyLoc") && this.prev < n.finallyLoc) { var i = n; break } } i && ("break" === e || "continue" === e) && i.tryLoc <= t && t <= i.finallyLoc && (i = null); var o = i ? i.completion : {}; return o.type = e, o.arg = t, i ? (this.method = "next", this.next = i.finallyLoc, b) : this.complete(o) }, complete: function (e, t) { if ("throw" === e.type) throw e.arg; return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), b }, finish: function (e) { for (var t = this.tryEntries.length - 1; 0 <= t; --t) { var r = this.tryEntries[t]; if (r.finallyLoc === e) return this.complete(r.completion, r.afterLoc), E(r), b } }, catch: function (e) { for (var t = this.tryEntries.length - 1; 0 <= t; --t) { var r = this.tryEntries[t]; if (r.tryLoc === e) { var n = r.completion; if ("throw" === n.type) { var i = n.arg; E(r) } return i } } throw new Error("illegal catch attempt") }, delegateYield: function (e, t, r) { return this.delegate = { iterator: R(e), resultName: t, nextLoc: r }, "next" === this.method && (this.arg = u), b } }, o }("object" == typeof t ? t.exports : {}); try { regeneratorRuntime = n } catch (e) { Function("r", "regeneratorRuntime = r")(n) } }, {}], 12: [function (e, t, r) { for (var i = [], n = 0; n < 256; ++n)i[n] = (n + 256).toString(16).substr(1); t.exports = function (e, t) { var r = t || 0, n = i; return [n[e[r++]], n[e[r++]], n[e[r++]], n[e[r++]], "-", n[e[r++]], n[e[r++]], "-", n[e[r++]], n[e[r++]], "-", n[e[r++]], n[e[r++]], "-", n[e[r++]], n[e[r++]], n[e[r++]], n[e[r++]], n[e[r++]], n[e[r++]]].join("") } }, {}], 13: [function (e, t, r) { var n = "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof d.msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto); if (n) { var i = new Uint8Array(16); t.exports = function () { return n(i), i } } else { var o = new Array(16); t.exports = function () { for (var e, t = 0; t < 16; t++)0 == (3 & t) && (e = 4294967296 * Math.random()), o[t] = e >>> ((3 & t) << 3) & 255; return o } } }, {}], 14: [function (e, t, r) { "use strict"; function m(e, t, r, n) { switch (e) { case 0: return t & r ^ ~t & n; case 1: return t ^ r ^ n; case 2: return t & r ^ t & n ^ r & n; case 3: return t ^ r ^ n } } function g(e, t) { return e << t | e >>> 32 - t } t.exports = function (e) { var t = [1518500249, 1859775393, 2400959708, 3395469782], r = [1732584193, 4023233417, 2562383102, 271733878, 3285377520]; if ("string" == typeof e) { var n = unescape(encodeURIComponent(e)); e = new Array(n.length); for (var i = 0; i < n.length; i++)e[i] = n.charCodeAt(i) } e.push(128); var o = e.length / 4 + 2, a = Math.ceil(o / 16), s = new Array(a); for (i = 0; i < a; i++) { s[i] = new Array(16); for (var u = 0; u < 16; u++)s[i][u] = e[64 * i + 4 * u] << 24 | e[64 * i + 4 * u + 1] << 16 | e[64 * i + 4 * u + 2] << 8 | e[64 * i + 4 * u + 3] } for (s[a - 1][14] = 8 * (e.length - 1) / Math.pow(2, 32), s[a - 1][14] = Math.floor(s[a - 1][14]), s[a - 1][15] = 8 * (e.length - 1) & 4294967295, i = 0; i < a; i++) { for (var c = new Array(80), l = 0; l < 16; l++)c[l] = s[i][l]; for (l = 16; l < 80; l++)c[l] = g(c[l - 3] ^ c[l - 8] ^ c[l - 14] ^ c[l - 16], 1); var f = r[0], p = r[1], h = r[2], d = r[3], b = r[4]; for (l = 0; l < 80; l++) { var v = Math.floor(l / 20), y = g(f, 5) + m(v, p, h, d) + b + t[v] + c[l] >>> 0; b = d, d = h, h = g(p, 30) >>> 0, p = f, f = y } r[0] = r[0] + f >>> 0, r[1] = r[1] + p >>> 0, r[2] = r[2] + h >>> 0, r[3] = r[3] + d >>> 0, r[4] = r[4] + b >>> 0 } return [r[0] >> 24 & 255, r[0] >> 16 & 255, r[0] >> 8 & 255, 255 & r[0], r[1] >> 24 & 255, r[1] >> 16 & 255, r[1] >> 8 & 255, 255 & r[1], r[2] >> 24 & 255, r[2] >> 16 & 255, r[2] >> 8 & 255, 255 & r[2], r[3] >> 24 & 255, r[3] >> 16 & 255, r[3] >> 8 & 255, 255 & r[3], r[4] >> 24 & 255, r[4] >> 16 & 255, r[4] >> 8 & 255, 255 & r[4]] } }, {}], 15: [function (e, t, r) { var c = e("./bytesToUuid"); t.exports = function (e, s, u) { function t(e, t, r, n) { var i = r && n || 0; if ("string" == typeof e && (e = function (e) { e = unescape(encodeURIComponent(e)); for (var t = new Array(e.length), r = 0; r < e.length; r++)t[r] = e.charCodeAt(r); return t }(e)), "string" == typeof t && (t = function (e) { var t = []; return e.replace(/[a-fA-F0-9]{2}/g, function (e) { t.push(parseInt(e, 16)) }), t }(t)), !Array.isArray(e)) throw TypeError("value must be an array of bytes"); if (!Array.isArray(t) || 16 !== t.length) throw TypeError("namespace must be uuid string or an Array of 16 byte values"); var o = u(t.concat(e)); if (o[6] = 15 & o[6] | s, o[8] = 63 & o[8] | 128, r) for (var a = 0; a < 16; ++a)r[i + a] = o[a]; return r || c(o) } try { t.name = e } catch (e) { } return t.DNS = "6ba7b810-9dad-11d1-80b4-00c04fd430c8", t.URL = "6ba7b811-9dad-11d1-80b4-00c04fd430c8", t } }, { "./bytesToUuid": 12 }], 16: [function (e, t, r) { var a = e("./lib/rng"), s = e("./lib/bytesToUuid"); t.exports = function (e, t, r) { var n = t && r || 0; "string" == typeof e && (t = "binary" === e ? new Array(16) : null, e = null); var i = (e = e || {}).random || (e.rng || a)(); if (i[6] = 15 & i[6] | 64, i[8] = 63 & i[8] | 128, t) for (var o = 0; o < 16; ++o)t[n + o] = i[o]; return t || s(i) } }, { "./lib/bytesToUuid": 12, "./lib/rng": 13 }], 17: [function (e, t, r) { var n = e("./lib/v35.js"), i = e("./lib/sha1"); t.exports = n("v5", 80, i) }, { "./lib/sha1": 14, "./lib/v35.js": 15 }], 18: [function (e, t, r) { "use strict"; var n = e("@babel/runtime/helpers/interopRequireDefault"), i = n(e("@babel/runtime/helpers/classCallCheck")), o = n(e("@babel/runtime/helpers/createClass")), a = e("./util").isset, s = function () { function n(e, t, r) { (0, i.default)(this, n), this.providerManager = t || {}, this.params = [], this.clientId = e, this.eventData = r } return (0, o.default)(n, [{ key: "buildParams", value: function () { this.params = [], this.setParam("client_id", this.clientId); var e = this.eventData; if ("function" == typeof this.providerManager.getUserIdentifierData) { var t = this.providerManager.getUserIdentifierData(); this.setParam("user_identifiers", JSON.stringify(t)) } for (var r in e) e.hasOwnProperty(r) && e[r] && this.setParam(r, e[r]); this.setParam("__ts__", Date.now()) } }, { key: "setParam", value: function (e, t) { a(t) ? this.params.push("".concat(e, "=").concat(encodeURIComponent(t))) : this.params.push("".concat(e, "=")) } }, { key: "send", value: function () { this.buildParams(), this.sendImage() } }, { key: "sendImage", value: function () { this.img = b.createElement("img"), this.img.src = this.getSourceUrl(), this.img.style.display = "none", this.img.width = "1", this.img.height = "1", b.getElementsByTagName("body")[0].appendChild(this.img) } }, { key: "getSourceUrl", value: function () { return "".concat("https://apac.gcds.coke.com/v1/datamart/collect.gif", "?").concat(this.params.join("&")) } }]), n }(); t.exports = s }, { "./util": 26, "@babel/runtime/helpers/classCallCheck": 2, "@babel/runtime/helpers/createClass": 3, "@babel/runtime/helpers/interopRequireDefault": 6 }], 19: [function (e, t, r) { "use strict"; var n = e("@babel/runtime/helpers/interopRequireDefault"), o = n(e("@babel/runtime/helpers/classCallCheck")), a = n(e("@babel/runtime/helpers/createClass")), s = e("./providers/DigiTrust.provider"), u = e("./providers/TradeDesk.provider"), c = e("./providers/CdsPixel.provider"), l = e("./providers/WebRedirect.provider"), i = function () { function i(e) { var t = this; (0, o.default)(this, i), this.providers = [], this.providers.push(this.createPixelProvider()), this.providers.push(this.createWebRedirectProvider()); var r = { provider: "TradeDesk", ttd_pid: "1864dh6", enabled: !0 }; Array.isArray(e) && e.length && e.forEach(function (e) { switch (e.provider.toString().trim().toLowerCase()) { case "digitrust": e; break; case "tradedesk": r = e } }); var n = [r].map(function (e) { return t.createProvider(e) }).filter(function (e) { return e }); this.providers = this.providers.concat(n) } return (0, a.default)(i, [{ key: "createProvider", value: function (e) { var t, r, n; if (t = e.provider, n = e.enabled, t && !n) return !1; switch (t = t.toString().trim().toLowerCase()) { case "digitrust": r = new s(e); break; case "tradedesk": r = new u(e); break; default: r = !1 }return r } }, { key: "createPixelProvider", value: function () { return new c } }, { key: "createWebRedirectProvider", value: function () { return new l } }, { key: "initialize", value: function () { this.providers.forEach(function (e) { return e.initialize() }) } }, { key: "getUserIdentifierData", value: function () { var t = []; return this.providers.forEach(function (e) { return t.push(e.getUserIdentifierData()) }), t.filter(function (e) { return e }) } }]), i }(); t.exports = i }, { "./providers/CdsPixel.provider": 21, "./providers/DigiTrust.provider": 22, "./providers/TradeDesk.provider": 23, "./providers/WebRedirect.provider": 24, "@babel/runtime/helpers/classCallCheck": 2, "@babel/runtime/helpers/createClass": 3, "@babel/runtime/helpers/interopRequireDefault": 6 }], 20: [function (e, t, r) { "use strict"; var n = e("@babel/runtime/helpers/interopRequireDefault"), i = n(e("@babel/runtime/helpers/classCallCheck")), o = n(e("@babel/runtime/helpers/createClass")), a = function () { function e() { if ((0, i.default)(this, e), this.constructor === e) throw new TypeError("Can not construct abstract class."); if (this.initialize === e.prototype.initialize) throw new TypeError("Please implement abstract method initialize."); if (this.getUserIdentifierData === e.prototype.getUserIdentifierData) throw new TypeError("Please implement abstract method getUserIdentifierData.") } return (0, o.default)(e, [{ key: "initialize", value: function () { throw new TypeError("Do not call abstract method initialize from child.") } }, { key: "getUserIdentifierData", value: function () { throw new TypeError("Do not call abstract method getUserIdentifierData from child.") } }]), e }(); t.exports = a }, { "@babel/runtime/helpers/classCallCheck": 2, "@babel/runtime/helpers/createClass": 3, "@babel/runtime/helpers/interopRequireDefault": 6 }], 21: [function (e, t, r) { "use strict"; var n = e("@babel/runtime/helpers/interopRequireDefault"), i = n(e("@babel/runtime/helpers/classCallCheck")), o = n(e("@babel/runtime/helpers/createClass")), a = n(e("@babel/runtime/helpers/possibleConstructorReturn")), s = n(e("@babel/runtime/helpers/getPrototypeOf")), u = n(e("@babel/runtime/helpers/inherits")), c = e("../util").Cookie, l = function (e) { function t() { return (0, i.default)(this, t), (0, a.default)(this, (0, s.default)(t).call(this)) } return (0, u.default)(t, e), (0, o.default)(t, [{ key: "initialize", value: function () { c.checkId() } }, { key: "getUserIdentifierData", value: function () { return { user_identifier_type: "COKE_COOKIE", user_identifier_sub_type: "CDS_PIXEL_COOKIE", user_identifier: c.checkId() } } }]), t }(e("./Abstract.provider")); t.exports = l }, { "../util": 26, "./Abstract.provider": 20, "@babel/runtime/helpers/classCallCheck": 2, "@babel/runtime/helpers/createClass": 3, "@babel/runtime/helpers/getPrototypeOf": 4, "@babel/runtime/helpers/inherits": 5, "@babel/runtime/helpers/interopRequireDefault": 6, "@babel/runtime/helpers/possibleConstructorReturn": 7 }], 22: [function (e, t, r) { "use strict"; var n = e("@babel/runtime/helpers/interopRequireDefault"), o = n(e("@babel/runtime/regenerator")), i = n(e("@babel/runtime/helpers/classCallCheck")), a = n(e("@babel/runtime/helpers/createClass")), s = n(e("@babel/runtime/helpers/possibleConstructorReturn")), u = n(e("@babel/runtime/helpers/getPrototypeOf")), c = n(e("@babel/runtime/helpers/inherits")), l = function (e) { function n(e) { var t; (0, i.default)(this, n); var r = e || {}; return (t = (0, s.default)(this, (0, u.default)(n).call(this))).initialArgs = r.initialArgs, t.loaded = !1, t } return (0, c.default)(n, e), (0, a.default)(n, [{ key: "isLoaded", value: function () { return this.loaded } }, { key: "isValid", value: function () { var e = this.initialArgs; return e && e.member && e.site } }, { key: "initialize", value: function () { var e, t, r; e = this, (t = b.createElement("script")).type = "text/javascript", t.src = "https://cdn.digitru.st/prod/1/digitrust.min.js", t.onload = t.onreadystatechange = function () { e.loaded || !e.isValid() || this.readyState && "complete" != this.readyState || (e.loaded = !0, DigiTrust.initialize(e.initialArgs)) }, (r = b.getElementsByTagName("script")[0]).parentNode.insertBefore(t, r) } }, { key: "getUserIdentifierData", value: function () { var t, r, n, i; return o.default.async(function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (this.isLoaded()) { e.next = 2; break } return e.abrupt("return", null); case 2: return t = function (e) { return new Promise(function (t, r) { try { DigiTrust.getUser(e, function (e) { t(e) }) } catch (e) { r(e) } }) }, e.next = 5, o.default.awrap(t(this.initialArgs)); case 5: if ((r = e.sent).success) { e.next = 8; break } return e.abrupt("return", null); case 8: if ((n = r.identity).privacy.optout) return e.abrupt("return", null); e.next = 11; break; case 11: return i = (i = n.version) || 1, e.abrupt("return", { user_identifier_type: "DigiTrust", user_identifier_sub_type: "Digitrust_ID_V".concat(i), user_identifier: n.id }); case 14: case "end": return e.stop() } }, null, this) } }]), n }(e("./Abstract.provider")); t.exports = l }, { "./Abstract.provider": 20, "@babel/runtime/helpers/classCallCheck": 2, "@babel/runtime/helpers/createClass": 3, "@babel/runtime/helpers/getPrototypeOf": 4, "@babel/runtime/helpers/inherits": 5, "@babel/runtime/helpers/interopRequireDefault": 6, "@babel/runtime/helpers/possibleConstructorReturn": 7, "@babel/runtime/regenerator": 10 }], 23: [function (e, t, r) { "use strict"; var n = e("@babel/runtime/helpers/interopRequireDefault"), i = n(e("@babel/runtime/helpers/classCallCheck")), o = n(e("@babel/runtime/helpers/createClass")), a = n(e("@babel/runtime/helpers/possibleConstructorReturn")), s = n(e("@babel/runtime/helpers/getPrototypeOf")), u = n(e("@babel/runtime/helpers/inherits")), c = e("../util").Cookie, l = e("./Abstract.provider"), f = 129600; function p(e) { var t = c.checkId(); !function (e) { try { var t = new Image; t.onload = function () { c.set("td_init", 1, f) }, t.style.display = "none", b.getElementsByTagName("body")[0].appendChild(t), t.src = e } catch (e) { throw e } }("https://match.adsrvr.org/track/cmf/generic?ttd_pid=".concat(e, "&ttd_tpi=1&ttd_puid=").concat(t)) } var h = function (e) { function n(e) { var t; (0, i.default)(this, n); var r = e || {}; return (t = (0, a.default)(this, (0, s.default)(n).call(this))).ttd_pid = r.ttd_pid, t } return (0, u.default)(n, e), (0, o.default)(n, [{ key: "initialize", value: function () { try { c.exists("td_init") ? c.set("td_init", 1, f) : p(this.ttd_pid) } catch (e) { console.log(e) } } }, { key: "getUserIdentifierData", value: function () { } }]), n }(l); t.exports = h }, { "../util": 26, "./Abstract.provider": 20, "@babel/runtime/helpers/classCallCheck": 2, "@babel/runtime/helpers/createClass": 3, "@babel/runtime/helpers/getPrototypeOf": 4, "@babel/runtime/helpers/inherits": 5, "@babel/runtime/helpers/interopRequireDefault": 6, "@babel/runtime/helpers/possibleConstructorReturn": 7 }], 24: [function (e, t, r) { "use strict"; var n = e("@babel/runtime/helpers/interopRequireDefault"), i = n(e("@babel/runtime/helpers/classCallCheck")), o = n(e("@babel/runtime/helpers/createClass")), a = n(e("@babel/runtime/helpers/possibleConstructorReturn")), s = n(e("@babel/runtime/helpers/getPrototypeOf")), u = n(e("@babel/runtime/helpers/inherits")), c = e("../util").Cookie, l = e("./Abstract.provider"); var f = function (e) { function t() { return (0, i.default)(this, t), (0, a.default)(this, (0, s.default)(t).call(this)) } return (0, u.default)(t, e), (0, o.default)(t, [{ key: "initialize", value: function () { this.web_redirect_id = function (e, t) { t = t || d.location.href, e = e.replace(/[\[\]]/g, "\\$&"); var r = new RegExp("[?&]" + e + "(=([^&#]*)|&|#|$)").exec(t); return r && r[2] ? decodeURIComponent(r[2].replace(/\+/g, " ")) : null }("cid", d.location.href), this.web_redirect_id || (this.web_redirect_id = c.get("redirect_cookie_id")), this.web_redirect_id && "undefined" != this.web_redirect_id && c.set("redirect_cookie_id", this.web_redirect_id, 129600) } }, { key: "getUserIdentifierData", value: function () { return this.web_redirect_id ? { user_identifier_type: "COKE_COOKIE", user_identifier_sub_type: "CDS_REDIRECT_COOKIE", user_identifier: this.web_redirect_id } : null } }]), t }(l); t.exports = f }, { "../util": 26, "./Abstract.provider": 20, "@babel/runtime/helpers/classCallCheck": 2, "@babel/runtime/helpers/createClass": 3, "@babel/runtime/helpers/getPrototypeOf": 4, "@babel/runtime/helpers/inherits": 5, "@babel/runtime/helpers/interopRequireDefault": 6, "@babel/runtime/helpers/possibleConstructorReturn": 7 }], 25: [function (e, t, r) { "use strict"; var n = e("@babel/runtime/helpers/interopRequireDefault"), o = n(e("@babel/runtime/helpers/typeof")), u = n(e("@babel/runtime/regenerator")), c = e("./providerManager"), a = e("./util").Cookie, s = e("./util").isset, l = e("./pixel"); function f() { var e = new Date; return "".concat(e.getFullYear()).concat(e.getMonth() + 1).concat(e.getDate()) } function p(n) { return new Promise(function (e, t) { var r; (r = d.XMLHttpRequest ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange = function () { 4 == r.readyState && 200 == r.status && e(r.response) }, r.open("GET", "".concat("https://apac.gcds.coke.com/v1/datamart/validate", "?clientId=").concat(n), !0), r.setRequestHeader("Content-Type", "application/json"), r.send() }) } v.init = function (i, o) { var a, s = this; this.initialized || (this.providerManager = new c(i), console.log(this.providerManager), this.providerManager.initialize(), console.log(this.providerManager), this.initialized = !0, d.onload = function () { var t, r, n; return u.default.async(function (e) { for (; ;)switch (e.prev = e.next) { case 0: if ("function" == typeof s.providerManager.getUserIdentifierData) return e.next = 3, u.default.awrap(s.providerManager.getUserIdentifierData()); e.next = 4; break; case 3: a = e.sent; case 4: i[0] && i[0].redirectValue ? (t = i[0].redirectValue, r = "".concat(t, "&user_identifiers=").concat(encodeURIComponent(JSON.stringify(a))), location.href = "".concat("https://lrey33sstj.execute-api.ap-southeast-1.amazonaws.com/prd/redirect").concat(r)):o&&"<cds-client-id>"!==o&&(n={event_type:"page_load",user_identifiers:JSON.stringify(a)},new l(o,null,n).send());case 5:case"end":return e.stop()}})})},v.judgeClientId=function(t){var r,n,i;return u.default.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="validate-".concat(t,"-").concat(f()),a.exists(r)){e.next=10;break}return e.next=4,u.default.awrap(p(t));case 4:n=e.sent,i=JSON.parse(n).status,this.status=i,a.set("validate-".concat(t,"-").concat(f()),i,1440),e.next=11;break;case 10:this.status=a.get(r);case 11:case"end":return e.stop()}},null,this)},v.process=function(e,t){function r(){0!=i.status&&s(e)&&"object"===(0,o.default)(t)&&0!==Object.keys(t)&&(new l(e,i.providerManager,t).send(),v.judgeClientId(e))}var n,i=this;this.providerManager?r():n=setInterval(function(){i.providerManager&&(r(),n&&clearInterval(n))},100)};for(var i=0,h=v.queue.length;i<h;i++)v.process.apply(v,v.queue[i])},{"./pixel":18,"./providerManager":19,"./util":26,"@babel/runtime/helpers/interopRequireDefault":6,"@babel/runtime/helpers/typeof":9,"@babel/runtime/regenerator":10}],26:[function(r,e,t){"use strict";function s(e){return null!=e&&""!==e}var n={prefix:function(){return"__cds_pixel_"},set:function(e,t,r,n){var i=3<arguments.length&&void 0!==n?n:"/",o="";if(s(r)){var a=new Date;a.setTime(a.getTime()+60*r*1e3),o="; expires="+a.toGMTString()}b.cookie=this.prefix()+e+"="+t+o+"; path="+i},get:function(e){e=this.prefix()+e+"=";for(var t=b.cookie.split(";"),r=0;r<t.length;r++){for(var n=t[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}},delete:function(e){this.set(e,"",-100)},exists:function(e){return s(this.get(e))},checkId:function(){var e=r("uuid/v4"),t=r("uuid/v5");return this.exists("id")?this.set("id",this.get("id"),129600):this.set("id",t(e(),t("apac.gcds.coke.com",t.URL)),129600),this.get("id")}};e.exports={Cookie:n,isset:s}},{"uuid/v4":16,"uuid/v5":17}]},{},[25])}(window,document,window.cds_pixel);